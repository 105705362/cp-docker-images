version: "2"

services:
  zookeeper:
    image: confluentinc/zookeeper:latest
    environment:
      SERVER_ID: 2

  failing-config:
    image: confluentinc/kafka:latest

  failing-config-zk-connect:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1

  failing-config-adv-listeners:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "something"

  failing-config-adv-port:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181"
      ADVERTISED_LISTENERS: "PLAINTEXT://foo:9092"
      ADVERTISED_PORT: "kafka"

  failing-config-adv-hostname:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181"
      ADVERTISED_LISTENERS: "PLAINTEXT://foo:9092"
      ADVERTISED_HOST: "kafka"

  failing-config-port:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181"
      ADVERTISED_LISTENERS: "PLAINTEXT://foo:9092"
      PORT: "kafka"

  failing-config-host:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181"
      ADVERTISED_LISTENERS: "PLAINTEXT://foo:9092"
      HOST: "kafka"

  default-config:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181/defaultconfig"
      ADVERTISED_LISTENERS: "PLAINTEXT://default-config:9092"

  full-config:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181/fullconfig"
      ADVERTISED_LISTENERS: "PLAINTEXT://full-config:9092"
      LOG4J_LOGGERS: "kafka.controller=WARN,kafka.foo.bar=DEBUG"
      LOG4J_ROOT_LOGLEVEL: WARN
      TOOLS_LOG4J_LOGLEVEL: ERROR

  external-volumes:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181/externalvolumes"
      ADVERTISED_LISTENERS: "PLAINTEXT://external-volumes:9092"
    volumes:
      - /tmp/kafka-config-test/data:/opt/kafka/data

  random-user:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181/randomuser"
      ADVERTISED_LISTENERS: "PLAINTEXT://random-user:9092"
    user: "12345"

  kitchen-sink:
    image: confluentinc/kafka:latest
    environment:
      BROKER_ID: 1
      ZOOKEEPER_CONNECT: "zookeeper:2181/kitchensink"
      ADVERTISED_LISTENERS: "PLAINTEXT://kitchen-sink:9092"
    volumes:
      - /tmp/kafka-config-kitchen-sink-test/data:/opt/kafka/data
    user: "12345"
